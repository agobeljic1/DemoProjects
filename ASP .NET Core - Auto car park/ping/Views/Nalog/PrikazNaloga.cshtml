
@using ping.Models.DatabaseKlase
@model Nalog
@{
    ViewBag.Title = "Nalog";
    Layout = "~/Views/Shared/_Layout.cshtml";
}





<div class="row">
    <div class="col-md-4">
        <section>
            <h2>@ViewBag.Data.Auto.Model</h2>
            <hr />
            <div class="form-group">
                <label asp-for="Auto" style="font-weight: bold"></label>: <a asp-area="" asp-controller="Automobili" asp-action="PrikazAuta" asp-route-autoId=@ViewBag.Data.Id>@ViewBag.Data.Auto.Model</a>
            </div>
            <div class="form-group">
                <label asp-for="ImePrezimeVozaca" style="font-weight: bold"></label>: @ViewBag.Data.ImePrezimeVozaca
            </div>
            <div class="form-group">
                <label asp-for="VrijemePocetak" style="font-weight: bold"></label>: @ViewBag.Data.VrijemePocetak
            </div>
            <div class="form-group">
                <label asp-for="VrijemeKraj" style="font-weight: bold"></label>: @ViewBag.Data.VrijemeKraj
            </div>
            <div class="form-group">
                <label asp-for="PolaznaLokacija" style="font-weight: bold"></label>: @ViewBag.Data.PolaznaLokacija
            </div>
            <div class="form-group">
                <label asp-for="DolaznaLokacija" style="font-weight: bold"></label>: @ViewBag.Data.DolaznaLokacija
            </div>
            <div class="form-group">
                <label asp-for="BrojPutnikaUAutomobilu" style="font-weight: bold"></label>: @ViewBag.Data.BrojPutnikaUAutomobilu
            </div>
            <div class="form-group">
                <label asp-for="NalogStatus" style="font-weight: bold"></label>: @ViewBag.Data.NalogStatus.Naziv
            </div>


        </section>
    </div>
    <div class="col-md-8">
        <section>
            <div style="width: 100%">
                <h2 style="display: inline-block">Promjena statusa</h2>

            </div>

            <hr />

            Nalog se može naći u sljedećim statusima:
            <ol>
                <li>Evidentiran - Nalog nakon kreiranja prelazi u stanje Evidentiran</li>
                <li>Potrvđen - Nakon preuzimanja vozila, nalog prelazi u stanje Potvrđen</li>
                <li>Odbijen - Ako se preuzimanje neće dogoditi. nalog prelazi u stanje Odbijen </li>
                <li>Završen - Vraćanjem preuzetog vozila, nalog prelazi u stanje Završen</li>
            </ol>
            Trenutno je nalog u statusu @ViewBag.Data.NalogStatus.Naziv
            <br />

            @if (ViewBag.Data.NalogStatus.Id == 4)
            {
                <p>Nalog je završen. Ne možete mijenjati njegov status.</p>
            }
            else
            {
                <p>Odaberite novi status:</p>

                if (ViewBag.Data.NalogStatus.Id == 1)
                {
                    <div style="display: inline-block; width: 100%; margin-bottom: 2vh">
                        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#BootstrapModalId3">Odbijen</button>
                        <button style="float:right" type="button" class="btn btn-success" data-toggle="modal" data-target="#BootstrapModalId2">Potvrđen</button>
                    </div>
                }
                else if(ViewBag.Data.NalogStatus.Id == 3)
                {
                    <div style="display: inline-block; width: 100%; margin-bottom: 2vh">
                        <button style="float:right" type="button" class="btn btn-success" data-toggle="modal" data-target="#BootstrapModalId2">Potvrđen</button>
                    </div>
                }
                else
                {
                    <div style="display: inline-block; width: 100%; margin-bottom: 2vh">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#BootstrapModalId4">Završen</button>
                    </div>

                }
            }

        </section>
    </div>
</div>
<div id="BootstrapModalId2" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-body">
                Da li ste sigurni da želite potvrditi nalog?
            </div>
            <div class="modal-footer">
                @Html.ActionLink("Potvrdi", "PromijeniNalog", "Nalog", new { nalogId = ViewBag.Data.Id, nalogStatusId = 2 }, new { @class = "btn btn-primary btn-update" })


                <button type="button" class="btn btn-secondary" data-dismiss="modal">Nazad</button>
            </div>
        </div>
    </div>
</div>
<div id="BootstrapModalId3" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-body">
                Da li ste sigurni da želite odbiti nalog?
            </div>
            <div class="modal-footer">
                @Html.ActionLink("Potvrdi", "PromijeniNalog", "Nalog", new { nalogId = ViewBag.Data.Id, nalogStatusId = 3 }, new { @class = "btn btn-primary btn-update" })


                <button type="button" class="btn btn-secondary" data-dismiss="modal">Nazad</button>
            </div>
        </div>
    </div>
</div>

<div id="BootstrapModalId4" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-body">
                Da li ste sigurni da želite završiti nalog?
            </div>
            <div class="modal-footer">
                @Html.ActionLink("Potvrdi", "PromijeniNalog", "Nalog", new { nalogId = ViewBag.Data.Id, nalogStatusId = 4 }, new { @class = "btn btn-primary btn-update" })


                <button type="button" class="btn btn-secondary" data-dismiss="modal">Nazad</button>
            </div>
        </div>
    </div>
</div>

